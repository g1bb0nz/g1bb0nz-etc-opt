# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
version: 2
console_title_template: "{{if .Root}}# {{end}}{{.UserName}}@{{.HostName}}: {{.Folder}}"
final_space: true
blocks:
  # 1st line left
  - type: prompt
    alignment: left
    segments:
      - type: session
        style: powerline
        powerline_symbol: "\ue0c6"
        background: darkGray
        template: "\u2800{{if .Root}}<red>\uf234{{else if .SSHSession}}<green>\uf2c0{{else}}<green>\uf007{{end}} <b>{{.UserName}}</b></>@{{.HostName}} "
      - type: os
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: blue
        template: "\u2800{{if .WSL}}\ue62a /{{end}}{{.Icon}}  "
      - type: path
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: yellow
        template: "\u2800\uf07b {{path .Path .Location}} "
        properties:
          style: agnoster_full
      - type: git
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground_templates:
          - "{{if or (.Working.Changed) (.Staging.Changed)}}lightYellow{{end}}"
          - "{{if lt 0 .Behind}}lightCyan{{end}}"
          - "{{if lt 0 .Ahead}}lightMagenta{{end}}"
        background: "#2f2f2f"
        template: "\u2800{{.UpstreamIcon}} {{.HEAD}} {{.BranchStatus}}{{if .Working.Changed}} \uf044 <lightRed>{{.Working.String}}</>{{end}}{{if and (.Working.Changed) (.Staging.Changed)}} |{{end}}{{if .Staging.Changed}} \uf046 <lightGreen>{{.Staging.String}}</>{{end}}{{if lt 0 .StashCount}} \uf0c7 {{.StashCount}}{{end}}{{if lt 0 .WorktreeCount}} \uf1bb {{.WorktreeCount}}{{end}} "
        properties:
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: true
          fetch_worktree_count: true
  # 1st line right
  - type: prompt
    alignment: right
    segments:
      - type: java
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: yellow
        template: "\u2800{{if .Env.JAVA_HOME}}\ue738 {{if .Error}}{{.Error}}{{else}}{{path .Full .Env.JAVA_HOME}}{{end}}{{end}}"
        properties:
          display_mode: always
          home_enabled: true
      - type: docker
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: yellow
        template: "\u2800\ue7b0 {{.Context}}"
      - type: python
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: yellow
        template: "\u2800\ue73c {{if .Error}}{{.Error}}{{else}}{{if .Venv}}{{.Venv}} {{end}}{{.Full}}{{end}}"
        properties:
          home_enabled: true
      - type: text
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: yellow
        template: "\u2800"
      - type: shell
        style: powerline
        powerline_symbol: "\ue0c6"
        foreground: transparent
        background: blue
        template: "\u2800\uf120 {{.Name}} {{.Version}} "
      - type: time
        style: powerline
        powerline_symbol: "\ue0c6"
        background: darkGray
        template: "\u2800\uf017 {{.CurrentDate | date .Format}} "
  # 2nd line left
  - type: prompt
    newline: true
    alignment: left
    segments:
      - type: text
        style: plain
        template: "{{if .Root}}<red>#{{else}}<green>${{end}}</>"
  # 2nd line right
  - type: rprompt
    segments:
      - type: executiontime
        style: plain
        template: "\u2800<red>\ue0c3</>  \uf253 {{.FormattedMs}} <red>\ue0c1</> "
      - type: status
        style: plain
        template: "\u2800\uf08b {{if .Error}}<red>\uf06a{{else}}<green>\uf00c{{end}}</> {{.String}} "
        properties:
          always_enabled: true
          status_template: "{{.Code}}{{if ne .Code 0}} (<red>{{reason .Code}}</>){{end}}"
